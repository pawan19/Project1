<!Doctype html>
<html>
<head>
	<style>
	body{
		background-image:url("boudha.jpg");
	}
	</style>
</head>
<body>
<script>
	var a,b;
	var interval;
	var c = null;
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function()
	{
    	if (this.readyState == 4 && this.status == 200) 
		{
			a = xhttp.responseText;
			b = JSON.parse(a);
			console.log(b);
			c = b.res.length;
			
		}
	};
	xhttp.open("GET", "https://d2t46sp5qi.execute-api.us-east-1.amazonaws.com/retrieve-weekly/retrieve-weekly", true); 
   	xhttp.send();
		
	interval = setInterval("getResult()", 100);
	document.write("<h1>Data is loading from server. Please wait for a while!!!</h1>");
	function getResult()
	{
 	if(c != null)
		{
		interval = clearInterval(interval);
			//alert(c); 
			looptable(c,b);
			
		}
	}				
				
//alert(interval);
var value1 = null;
var value2;
function looptable(value1 , value2)
	{
		document.write("<table border='solid 2px;' style='font-size:50px;'>");
	document.write("<thead><tr>");

		document.write("<th><label style='color:green;'>Date</label></th>");
				document.write("<th><label style='color:green;'>Customer </label></th>");
				document.write("<th><label style='color:green;'>Income</label></th>");
				document.write("<th><label style='color:green;'>Expense</label></th>");
			
	document.write("</tr>");	

		document.write("</thead>");	
	document.write("<tbody>");	

		
		for(var i =1; i<=value1; i++)
		{
			document.write("<tr>");
			for(var k=1; k<=4; k++)
				{
					if(k==1)
						document.write("<td>"+value2.res[i-1].date+"</td>");
					else if(k==2)
						document.write("<td>"+value2.res[i-1].customer+"</td>");
					else if(k==3)
						document.write("<td>"+value2.res[i-1].income+"</td>");
					else	
						document.write("<td>"+value2.res[i-1].expense+"</td>");
				}
			document.write("</tr>"); 
		}	
	}
	
</script>
	</tbody>
</table>
</body>
</html>